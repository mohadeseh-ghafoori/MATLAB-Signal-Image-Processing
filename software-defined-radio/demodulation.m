function demodulation( fc )
%UNTITLED6 Summary of this function goes here
%   Detailed explanation goes here
Num2=[-1.71393692494468e-09,2.77341597327421e-08,5.97158776678287e-08,6.50502376464414e-08,-6.64736617768025e-09,-1.64314630482374e-07,-3.23638371295267e-07,-3.13122696692209e-07,1.78492364073159e-08,6.23790685205297e-07,1.15180250245941e-06,1.05254878439908e-06,-4.11825552244913e-08,-1.85183456693207e-06,-3.28737469859108e-06,-2.89743259388227e-06,8.53577680378322e-08,4.70166425342285e-06,8.11804584871484e-06,6.97145776783652e-06,-1.62908863914545e-07,-1.06677061671255e-05,-1.80331368427894e-05,-1.51779524185476e-05,2.90765065506330e-07,2.21925012062210e-05,3.68823379160396e-05,3.05415290128860e-05,-4.90475518147003e-07,-4.30421213876269e-05,-7.05287242148833e-05,-5.76140916391086e-05,7.87865368248197e-07,7.87383029909314e-05,0.000127476748803727,0.000102929783307905,-1.21200486828269e-06,-0.000137028449389244,-0.000219546979664025,-0.000175488200461724,1.79335969744492e-06,0.000228372684941418,0.000362569527684325,0.000287247670907675,-2.56113317509631e-06,-0.000366435394713478,-0.000577084462092437,-0.000453625799766496,3.53993729217743e-06,0.000568593886134959,0.000889081252755962,0.000694041610858307,-4.74604235401353e-06,-0.000856529482230486,-0.00133089616882204,-0.00103260558547802,6.18360986095180e-06,0.00125706365817893,0.00194254690960340,0.00149919524329786,-7.84137616564300e-06,-0.00180358047922729,-0.00277407820070174,-0.00213139819639738,9.69028708231233e-06,0.00253871617077665,0.00389006300913893,0.00297828660980004,-1.16825604753827e-05,-0.00351969571099067,-0.00537860510520125,-0.00410802554473748,1.37525488023431e-05,0.00482928012474466,0.00736998366038946,0.00562380142401131,-1.58195128431023e-05,-0.00659929878667945,-0.0100773747097220,-0.00769924589811964,1.77923017502745e-05,0.00906530285676027,0.0138939037332003,0.0106653446298945,-1.95755818974796e-05,-0.0127101597003780,-0.0196581845522174,-0.0152592660212774,2.10770540793594e-05,0.0187222780988101,0.0295588999063903,0.0235378340017020,-2.22149799797225e-05,-0.0310254827935615,-0.0516580246053974,-0.0441753742751370,2.29251490349152e-05,0.0745453047624288,0.158685234328823,0.224896468804038,0.249976833429699,0.224896468804038,0.158685234328823,0.0745453047624288,2.29251490349152e-05,-0.0441753742751370,-0.0516580246053974,-0.0310254827935615,-2.22149799797225e-05,0.0235378340017020,0.0295588999063903,0.0187222780988101,2.10770540793594e-05,-0.0152592660212774,-0.0196581845522174,-0.0127101597003780,-1.95755818974796e-05,0.0106653446298945,0.0138939037332003,0.00906530285676027,1.77923017502745e-05,-0.00769924589811964,-0.0100773747097220,-0.00659929878667945,-1.58195128431023e-05,0.00562380142401131,0.00736998366038946,0.00482928012474466,1.37525488023431e-05,-0.00410802554473748,-0.00537860510520125,-0.00351969571099067,-1.16825604753827e-05,0.00297828660980004,0.00389006300913893,0.00253871617077665,9.69028708231233e-06,-0.00213139819639738,-0.00277407820070174,-0.00180358047922729,-7.84137616564300e-06,0.00149919524329786,0.00194254690960340,0.00125706365817893,6.18360986095180e-06,-0.00103260558547802,-0.00133089616882204,-0.000856529482230486,-4.74604235401353e-06,0.000694041610858307,0.000889081252755962,0.000568593886134959,3.53993729217743e-06,-0.000453625799766496,-0.000577084462092437,-0.000366435394713478,-2.56113317509631e-06,0.000287247670907675,0.000362569527684325,0.000228372684941418,1.79335969744492e-06,-0.000175488200461724,-0.000219546979664025,-0.000137028449389244,-1.21200486828269e-06,0.000102929783307905,0.000127476748803727,7.87383029909314e-05,7.87865368248197e-07,-5.76140916391086e-05,-7.05287242148833e-05,-4.30421213876269e-05,-4.90475518147003e-07,3.05415290128860e-05,3.68823379160396e-05,2.21925012062210e-05,2.90765065506330e-07,-1.51779524185476e-05,-1.80331368427894e-05,-1.06677061671255e-05,-1.62908863914545e-07,6.97145776783652e-06,8.11804584871484e-06,4.70166425342285e-06,8.53577680378322e-08,-2.89743259388227e-06,-3.28737469859108e-06,-1.85183456693207e-06,-4.11825552244913e-08,1.05254878439908e-06,1.15180250245941e-06,6.23790685205297e-07,1.78492364073159e-08,-3.13122696692209e-07,-3.23638371295267e-07,-1.64314630482374e-07,-6.64736617768025e-09,6.50502376464414e-08,5.97158776678287e-08,2.77341597327421e-08,-1.71393692494468e-09];
Num=[0.000410445753973973,0.00188433437790141,-0.000334686121190576,-8.93932764515195e-05,-0.000189786795028562,1.95871184478604e-05,0.000196542119514595,0.000160854955533313,-6.21005276133384e-05,-0.000224410838566934,-0.000137092259073812,0.000111669892128317,0.000244083965524301,0.000102842472204893,-0.000162909155117108,-0.000254117387796921,-5.83147786251998e-05,0.000213185515557923,0.000252631089774773,4.50683170688537e-06,-0.000259750872020050,-0.000238158798803602,5.70079862879560e-05,0.000299640201784622,0.000209738255194177,-0.000123953492640733,-0.000329962799353911,-0.000167126176800074,0.000193606896935812,0.000347915169734967,0.000110729928772734,-0.000262747244681115,-0.000351104205003578,-4.17112697788178e-05,0.000327814987340668,0.000337561398134247,-3.80322675148816e-05,-0.000385044862788941,-0.000305907977736991,0.000125775034078429,0.000430562557209732,0.000255498639611925,-0.000218028601620850,-0.000460657759520912,-0.000186642746554197,0.000310687198511536,0.000471955146544835,0.000100665426185500,-0.000399183736205800,-0.000461841640442203,5.93768841635120e-08,0.000478690595051026,0.000428582014343436,-0.000112164638136828,-0.000544512972923725,-0.000371413559522195,0.000231411439972075,0.000592061081623444,0.000290597799577380,-0.000352778091948733,-0.000616865335585268,-0.000187311403890127,0.000470237370373191,0.000614078963871772,6.24019729060623e-05,-0.000579579375499249,-0.000583220096220610,7.72934911540504e-05,0.000671754952983201,0.000521085224517930,-0.000228030945534617,-0.000742477780053930,-0.000428779295619220,0.000383850218339530,0.000786468543910597,0.000306596690268356,-0.000538421812900468,-0.000797581064426447,-0.000157117157146418,0.000682569691338898,0.000772535769826364,-1.34995166217624e-05,-0.000810050961572419,-0.000710033673587765,0.000201774995805581,0.000912531619649260,0.000607155734928997,-0.000398037610126444,-0.000982783275355873,-0.000467379724028744,0.000596381971432594,0.00101415886067604,0.000291648392027594,-0.000785070881861803,-0.00100287102610330,-8.53909230000350e-05,0.000956353870780207,0.000943392003372535,-0.000143628323545426,-0.00110053497108099,-0.000834790778031862,0.000388013588437811,0.00120750832477705,0.000677939358326033,-0.000638038089520475,-0.00126893587781693,-0.000475378785947685,0.000882353876163166,0.00127807370248321,0.000232072891778907,-0.00110909902472186,-0.00122970521649911,4.45070582148626e-05,0.00130619659390357,0.00112078850859697,-0.000344669375567101,-0.00146194759508160,-0.000950673756467788,0.000656875749645142,0.00156544302545689,0.000721400196410881,-0.000968099666934041,-0.00160719284284269,-0.000438039781782307,0.00126418000425079,0.00157990531979013,0.000109034887132746,-0.00152959582823518,-0.00147782685217897,0.000255580225474514,0.00175022287051842,0.00129956597820792,-0.000641952039135685,-0.00191166179626016,-0.00104585123162216,0.00103493224902159,0.00200140603880677,0.000721128709519885,-0.00141743923920731,-0.00200860805442359,-0.000333566630460338,0.00177112484630079,0.00192538361183022,-0.000105092151587204,-0.00207748535336724,-0.00174732119339821,0.000580084794799341,0.00231868259407555,0.00147332703780357,-0.00107370545043224,-0.00247760926062858,-0.00110657515399516,0.00156548719548640,0.00253939345103145,0.000654904363136315,-0.00203343773977544,-0.00249244537416608,-0.000129965797252840,0.00245490968112246,0.00232790643531671,-0.000452170757949641,-0.00280630261034452,-0.00204191879100666,0.00107122279437857,0.00306580263341624,0.00163495421358655,-0.00170404290468097,-0.00321245004964095,-0.00111271068465432,0.00232389748068672,0.00322881840160846,0.000486312928198235,-0.00290296360960448,-0.00310037242042714,0.000227942374570891,0.00341146655004516,0.00281790443553945,-0.00100860426413193,-0.00382039123161455,-0.00237651161400596,0.00182910266948026,0.00410115768107074,0.00177816963013378,-0.00265922058380957,-0.00422733626179242,-0.00103021351589675,0.00346430809706324,0.00417593037934680,0.000146552702048264,-0.00420803251045824,-0.00392818617065554,0.000851471865460230,0.00485175623671551,0.00346976076135387,-0.00193719789140774,-0.00535644684657139,-0.00279311447593934,0.00307753182284857,0.00568316249834203,0.00189662967855611,-0.00423379392588068,-0.00579443881754691,-0.000785443699882627,0.00536221236089303,0.00565510407988005,-0.000528155894600155,-0.00641476947625325,-0.00523277312119646,0.00202509401039511,0.00733976139386426,0.00449787242467490,-0.00367971843298625,-0.00808188090957088,-0.00342364191067582,0.00546029569250726,0.00858235495894620,0.00198532061484616,-0.00733009622436166,-0.00877806856934562,-0.000157541969776057,0.00924835107356297,0.00859904296225831,-0.00208981936556321,-0.0111708946192385,-0.00796368282226484,0.00479878699858945,0.0130519672502311,0.00676897913236884,-0.00803712153799051,-0.0148458305267494,-0.00487038076252284,0.0119254072790521,0.0165074908342486,0.00204019862551640,-0.0166928583622833,-0.0179945311002933,0.00212951500952065,0.0228105156731115,0.0192687646090678,-0.00848372911501789,-0.0313625935393098,-0.0202965066990916,0.0191384946487964,0.0453681339243441,0.0210509013881015,-0.0413199936193245,-0.0770473282910146,-0.0215115983827279,0.125744890744552,0.285844115323080,0.355000043677125,0.285844115323080,0.125744890744552,-0.0215115983827279,-0.0770473282910146,-0.0413199936193245,0.0210509013881015,0.0453681339243441,0.0191384946487964,-0.0202965066990916,-0.0313625935393098,-0.00848372911501789,0.0192687646090678,0.0228105156731115,0.00212951500952065,-0.0179945311002933,-0.0166928583622833,0.00204019862551640,0.0165074908342486,0.0119254072790521,-0.00487038076252284,-0.0148458305267494,-0.00803712153799051,0.00676897913236884,0.0130519672502311,0.00479878699858945,-0.00796368282226484,-0.0111708946192385,-0.00208981936556321,0.00859904296225831,0.00924835107356297,-0.000157541969776057,-0.00877806856934562,-0.00733009622436166,0.00198532061484616,0.00858235495894620,0.00546029569250726,-0.00342364191067582,-0.00808188090957088,-0.00367971843298625,0.00449787242467490,0.00733976139386426,0.00202509401039511,-0.00523277312119646,-0.00641476947625325,-0.000528155894600155,0.00565510407988005,0.00536221236089303,-0.000785443699882627,-0.00579443881754691,-0.00423379392588068,0.00189662967855611,0.00568316249834203,0.00307753182284857,-0.00279311447593934,-0.00535644684657139,-0.00193719789140774,0.00346976076135387,0.00485175623671551,0.000851471865460230,-0.00392818617065554,-0.00420803251045824,0.000146552702048264,0.00417593037934680,0.00346430809706324,-0.00103021351589675,-0.00422733626179242,-0.00265922058380957,0.00177816963013378,0.00410115768107074,0.00182910266948026,-0.00237651161400596,-0.00382039123161455,-0.00100860426413193,0.00281790443553945,0.00341146655004516,0.000227942374570891,-0.00310037242042714,-0.00290296360960448,0.000486312928198235,0.00322881840160846,0.00232389748068672,-0.00111271068465432,-0.00321245004964095,-0.00170404290468097,0.00163495421358655,0.00306580263341624,0.00107122279437857,-0.00204191879100666,-0.00280630261034452,-0.000452170757949641,0.00232790643531671,0.00245490968112246,-0.000129965797252840,-0.00249244537416608,-0.00203343773977544,0.000654904363136315,0.00253939345103145,0.00156548719548640,-0.00110657515399516,-0.00247760926062858,-0.00107370545043224,0.00147332703780357,0.00231868259407555,0.000580084794799341,-0.00174732119339821,-0.00207748535336724,-0.000105092151587204,0.00192538361183022,0.00177112484630079,-0.000333566630460338,-0.00200860805442359,-0.00141743923920731,0.000721128709519885,0.00200140603880677,0.00103493224902159,-0.00104585123162216,-0.00191166179626016,-0.000641952039135685,0.00129956597820792,0.00175022287051842,0.000255580225474514,-0.00147782685217897,-0.00152959582823518,0.000109034887132746,0.00157990531979013,0.00126418000425079,-0.000438039781782307,-0.00160719284284269,-0.000968099666934041,0.000721400196410881,0.00156544302545689,0.000656875749645142,-0.000950673756467788,-0.00146194759508160,-0.000344669375567101,0.00112078850859697,0.00130619659390357,4.45070582148626e-05,-0.00122970521649911,-0.00110909902472186,0.000232072891778907,0.00127807370248321,0.000882353876163166,-0.000475378785947685,-0.00126893587781693,-0.000638038089520475,0.000677939358326033,0.00120750832477705,0.000388013588437811,-0.000834790778031862,-0.00110053497108099,-0.000143628323545426,0.000943392003372535,0.000956353870780207,-8.53909230000350e-05,-0.00100287102610330,-0.000785070881861803,0.000291648392027594,0.00101415886067604,0.000596381971432594,-0.000467379724028744,-0.000982783275355873,-0.000398037610126444,0.000607155734928997,0.000912531619649260,0.000201774995805581,-0.000710033673587765,-0.000810050961572419,-1.34995166217624e-05,0.000772535769826364,0.000682569691338898,-0.000157117157146418,-0.000797581064426447,-0.000538421812900468,0.000306596690268356,0.000786468543910597,0.000383850218339530,-0.000428779295619220,-0.000742477780053930,-0.000228030945534617,0.000521085224517930,0.000671754952983201,7.72934911540504e-05,-0.000583220096220610,-0.000579579375499249,6.24019729060623e-05,0.000614078963871772,0.000470237370373191,-0.000187311403890127,-0.000616865335585268,-0.000352778091948733,0.000290597799577380,0.000592061081623444,0.000231411439972075,-0.000371413559522195,-0.000544512972923725,-0.000112164638136828,0.000428582014343436,0.000478690595051026,5.93768841635120e-08,-0.000461841640442203,-0.000399183736205800,0.000100665426185500,0.000471955146544835,0.000310687198511536,-0.000186642746554197,-0.000460657759520912,-0.000218028601620850,0.000255498639611925,0.000430562557209732,0.000125775034078429,-0.000305907977736991,-0.000385044862788941,-3.80322675148816e-05,0.000337561398134247,0.000327814987340668,-4.17112697788178e-05,-0.000351104205003578,-0.000262747244681115,0.000110729928772734,0.000347915169734967,0.000193606896935812,-0.000167126176800074,-0.000329962799353911,-0.000123953492640733,0.000209738255194177,0.000299640201784622,5.70079862879560e-05,-0.000238158798803602,-0.000259750872020050,4.50683170688537e-06,0.000252631089774773,0.000213185515557923,-5.83147786251998e-05,-0.000254117387796921,-0.000162909155117108,0.000102842472204893,0.000244083965524301,0.000111669892128317,-0.000137092259073812,-0.000224410838566934,-6.21005276133384e-05,0.000160854955533313,0.000196542119514595,1.95871184478604e-05,-0.000189786795028562,-8.93932764515195e-05,-0.000334686121190576,0.00188433437790141,0.000410445753973973];

fs=1e6;

    sdr1 = comm.SDRRTLReceiver(...
    'CenterFrequency', fc, ...
    'SampleRate',      fs, ...
    'SamplesPerFrame', 2^18, ...
    'OutputDataType',  'double');

while 1
    s=step(sdr1);
    z=filter(Num,1,s);
    z=30*z;
    m = z(1:end-1).*conj(z(2:end));
    v=angle(m);
    v=v-mean(v);
    n=decimate(v,20);
    n=filter(Num2,1,n);  
    sound(abs(n),(fs/20)); 
end

end

